
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>RobolinkItem</title><meta name="generator" content="MATLAB 8.5"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-03-26"><meta name="DC.source" content="RobolinkItem.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><pre class="codeinput"><span class="keyword">classdef</span> RobolinkItem &lt; handle
<span class="comment">% The Item class represents an item in RoboDK station.</span>
<span class="comment">% An item can be a robot, a frame, a tool, an object, a target, ... (any item visible in the station tree)</span>
<span class="comment">% An item can also be seen as a node where other items can be attached to (child items).</span>
<span class="comment">% Items (RobolinkItem) are created by certain functions calls from Robolink class.</span>
<span class="comment">% Every item has one parent item/node and can have one or more child items/nodes.</span>
<span class="comment">%</span>
<span class="comment">% RoboDK api Help:</span>
<span class="comment">% -&gt;Type "doc Robolink"            for more help on the Robolink class</span>
<span class="comment">% -&gt;Type "doc RobolinkItem"        for more help on the RobolinkItem item class</span>
<span class="comment">% -&gt;Type "showdemo Example_RoboDK" for examples on how to use RoboDK's API using the last two classes</span>

    <span class="keyword">properties</span>
        item = 0; <span class="comment">% This value should not be modified. It stores the object pointer</span>
        link = 0; <span class="comment">% This value should not be modified. It stores the connection pointer</span>
    <span class="keyword">end</span>
    <span class="keyword">methods</span>
        <span class="keyword">function</span> this = RobolinkItem(rl, ptr_item)
            <span class="comment">% Creates an item object from the Robolink() connection and an</span>
            <span class="comment">% item number</span>
            <span class="keyword">if</span> nargin &lt; 2
                ptr_item = 0;
            <span class="keyword">end</span>
            this.item = ptr_item;
            this.link = rl;
        <span class="keyword">end</span>
        <span class="keyword">function</span> type = Type(this)
            <span class="comment">% Returns an integer that represents the type of the item (robot, object, tool, frame, ...)</span>
            this.link.check_connection();
            command = <span class="string">'G_Item_Type'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            type = this.link.rec_int();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> Copy(this)
            <span class="comment">% Copy the item to the clipboard (same as Ctrl+C). Use together with Paste() to duplicate items.</span>
            this.link.Copy(this);
        <span class="keyword">end</span>
        <span class="keyword">function</span> newitem = Paste(this)
            <span class="comment">% Paste the item from the clipboard as a child of this item (same as Ctrl+V)</span>
            <span class="comment">% Out 1: item -&gt; new item pasted (created)</span>
            newitem = this.link.Paste(this.item);
        <span class="keyword">end</span>
        <span class="keyword">function</span> AddGeometry(this, fromitem, pose)
            <span class="comment">% Makes a copy of the geometry fromitem adding it at a given position (pose) relative to this item.</span>
            this.link.check_connection();
            command = <span class="string">'CopyFaces'</span>;
            this.link.send_line(command);
            this.link.send_item(fromitem);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> Delete(this)
            <span class="comment">% Deletes an item in the station.</span>
            this.link.check_connection();
            command = <span class="string">'Remove'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> valid = Valid(this)
            valid = (this.item ~= 0);
        <span class="keyword">end</span>
        <span class="keyword">function</span> setParent(this, parent)
            <span class="comment">% Moves the item to another location (parent)</span>
            <span class="comment">% In 1  : parent -&gt; parent to attach the item</span>
            this.link.check_connection();
            command = <span class="string">'S_Parent'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setParentStatic(this, parent)
            <span class="comment">% Moves the item to another location (parent) without changing the current position in the station</span>
            <span class="comment">% In 1  : parent -&gt; parent to attach the item</span>
            this.link.check_connection();
            command = <span class="string">'S_Parent_Static'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> item_attached = AttachClosest(this)
            <span class="comment">% Attaches the closest object to the provided tool.</span>
            <span class="comment">% Out  : item -&gt; returns the item that was attached (0 if none found)</span>
            this.link.check_connection();
            command = <span class="string">'Attach_Closest'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            item_attached = this.link.rec_item();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> DetachClosest(this, parent)
            <span class="comment">% Detaches the closest object attached to the tool (see also: Set_Parent_Static).</span>
            <span class="comment">% In  1 : item (optional) -&gt; parent to leave the objects</span>
            <span class="keyword">if</span> nargin &lt; 2
                parent = 0;
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'Detach_Closest'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> DetachAll(this, parent)
            <span class="comment">% Detaches any object attached to a tool (see also: Set_Parent_Static).</span>
            <span class="comment">% In  1 : item (optional) -&gt; parent to leave the objects</span>
            <span class="keyword">if</span> nargin &lt; 2
                parent = RobolinkItem(this.link);
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'Detach_All'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> parent = Parent(this)
            <span class="comment">% Returns the parent item of the provided item.</span>
            <span class="comment">% Out : parent -&gt; parent of the item</span>
            this.link.check_connection();
            command = <span class="string">'G_Parent'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            parent = this.link.rec_item();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> itemlist = Childs(this)
            <span class="comment">% Returns a list of the item childs that are attached to the provided item.</span>
            <span class="comment">% Out  : child x n -&gt; list of child item pointers</span>
            this.link.check_connection();
            command = <span class="string">'G_Childs'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            nitems = this.link.rec_int();
            itemlist = cell(nitems,1);
            <span class="keyword">for</span> i=1:nitems
                itemlist{i} = this.link.rec_item();
            <span class="keyword">end</span>
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
        <span class="keyword">function</span> visible = Visible(this)
            <span class="comment">% Returns 1 if the item is visible, otherwise, returns 0.</span>
            <span class="comment">% Out : int -&gt; visible (1) or not visible (0)</span>
            this.link.check_connection();
            command = <span class="string">'G_Visible'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            visible = this.link.rec_int();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setVisible(this, visible, visible_frame)
            <span class="comment">% Sets the item visiblity</span>
            <span class="comment">% In 2 : int -&gt; set visible (1) or not visible (0)</span>
            <span class="comment">% In 3 : int (optional) -&gt; set visible frame (True or 1) or not visible (False or 0)</span>
            <span class="keyword">if</span> nargin &lt; 3
                visible_frame = visible;
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'S_Visible'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_int(visible);
            this.link.send_int(visible_frame);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> name = Name(this)
            <span class="comment">% Gets the name of an item.</span>
            <span class="comment">% Out : name (string)</span>
            this.link.check_connection();
            command = <span class="string">'G_Name'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            name = this.link.rec_line();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setName(this, name)
            <span class="comment">% Sets the name of an item.</span>
            <span class="comment">% In 1 : name (string)</span>
            this.link.check_connection();
            command = <span class="string">'S_Name'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_line(name);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
        <span class="keyword">function</span> setPose(this, pose)
            <span class="comment">% Sets the local position (pose) of an item. For example, the position of an object/frame/target with respect to its parent.</span>
            <span class="comment">% In 1 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'S_Hlocal'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> pose = Pose(this)
            <span class="comment">% Gets the local position (pose) of an item. For example, the position of an object/frame/target with respect to its parent.</span>
            <span class="comment">% Out 1 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'G_Hlocal'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setHtool(this, pose)
            <span class="comment">% Sets the tool pose of an item.</span>
            <span class="comment">% In 2 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'S_Htool'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> pose = Htool(this)
            <span class="comment">% Gets the tool pose of an item.</span>
            <span class="comment">% Out 1 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'G_Htool'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setPoseAbs(this, pose)
            <span class="comment">% Sts the global position (pose) of an item. For example, the position of an object/frame/target with respect to the station origin.</span>
            <span class="comment">% In  1 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'S_Hlocal_Abs'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> pose = PoseAbs(this)
            <span class="comment">% Gets the global position (pose) of an item. For example, the position of an object/frame/target with respect to the station origin.</span>
            <span class="comment">% Out 1 : 4x4 homogeneous matrix (pose)</span>
            this.link.check_connection();
            command = <span class="string">'G_Hlocal_Abs'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> color = check_color(~, color)
            <span class="comment">% Makes formats color in a vector of size 4x1 and ranges [0,1]</span>
            cs = numel(color);
            color = reshape(color, 1, cs);
            <span class="keyword">if</span> cs &gt; 4
                color = color(1:4);
            <span class="keyword">elseif</span> cs &lt; 4
                color = [color(1:end), zeros(1,4-cs)];
                color(4) = 1;
            <span class="keyword">end</span>
            maxc = max(color);
            <span class="keyword">if</span> maxc &gt; 1
                color = color/maxc;
            <span class="keyword">end</span>
        <span class="keyword">end</span>
        <span class="keyword">function</span> Recolor(this, tocolor, fromcolor, tolerance)
            <span class="comment">% Changes the color of a robot/object/tool. A color must must in the format COLOR=[R,G,B,(A=1)] where all values range from 0 to 1.</span>
            <span class="comment">% Alpha (A) defaults to 1 (100% opaque). Set A to 0 to make an object transparent.</span>
            <span class="comment">% In  1 : color -&gt; color to change to</span>
            <span class="comment">% In  2 (optional) : color -&gt; filter by this color</span>
            <span class="comment">% In  3 (optional) : int -&gt; optional tolerance to use if a color filter is used (defaults to 0.1)</span>
            this.link.check_connection();
            <span class="keyword">if</span> nargin &lt; 3
                fromcolor = [0,0,0,0];
                tolerance = 2;
            <span class="keyword">elseif</span> nargin &lt; 4
                tolerance = 0.1;
            <span class="keyword">end</span>
            tocolor = check_color(this,tocolor);
            fromcolor = check_color(this,fromcolor);
            command = <span class="string">'Recolor'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array([tolerance(1), fromcolor, tocolor]);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> Scale(this, scale)
            <span class="comment">% Apply a scale to an object to make it bigger or smaller.</span>
            <span class="comment">% the scale can be uniform (one single value) or per axis (if scale is a vector [scale_x, scale_y, scale_z]).</span>
            <span class="comment">% In  1 : scale -&gt; scale to apply</span>
            this.link.check_connection();
            <span class="keyword">if</span> numel(scale) &lt; 3
                scale = [scale(1); scale(1); scale(1)];
            <span class="keyword">end</span>
            command = <span class="string">'Scale'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array(scale);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setAsCartesianTarget(this)
            <span class="comment">% Sets a target as a cartesian target. A cartesian target moves to cartesian coordinates.</span>
            this.link.check_connection();
            command = <span class="string">'S_Target_As_RT'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setAsJointTarget(this)
            <span class="comment">% Sets a target as a joint target. A joint target moves to a joints position.</span>
            this.link.check_connection();
            command = <span class="string">'S_Target_As_JT'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>

        <span class="keyword">function</span> joints = Joints(this)
            <span class="comment">% Returns the current joints of a robot or a target. In case of a cartesian target, it returns the preferred joints (configuration) to go to that cartesian position.</span>
            <span class="comment">% Out 1 : double x n -&gt; joints</span>
            this.link.check_connection();
            command = <span class="string">'G_Thetas'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            joints = this.link.rec_array();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setJoints(this, joints)
            <span class="comment">% Sets the current joints of a robot or a target. In case of a cartesian target, it returns the preferred joints (configuration) to go to that cartesian position.</span>
            <span class="comment">% In  1 : double x n -&gt; joints</span>
            this.link.check_connection();
            command = <span class="string">'S_Thetas'</span>;
            this.link.send_line(command);
            this.link.send_array(joints);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setFrame(this, frame)
            <span class="comment">% Sets the frame of a robot. The frame can be either an item pointer or a 4x4 Matrix.</span>
            <span class="comment">% If "frame" is an item pointer, it links the robot to the frame item. If frame is a 4x4 Matrix, it updates the linked pose of the robot frame.</span>
            <span class="comment">% In  1 : item/pose -&gt; frame item or 4x4 Matrix (pose of the reference frame)</span>
            this.link.check_connection();
            <span class="keyword">if</span> numel(frame) == 1
                command = <span class="string">'S_Frame_ptr'</span>;
                this.link.send_line(command);
                this.link.send_item(frame);
            <span class="keyword">else</span>
                command = <span class="string">'S_Frame'</span>;
                this.link.send_line(command);
                this.link.send_pose(frame);
            <span class="keyword">end</span>
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setTool(this, tool)
            <span class="comment">% Sets the tool pose of a robot. The tool pose can be either an item pointer or a 4x4 Matrix.</span>
            <span class="comment">% If "tool" is an item pointer, it links the robot to the tool item. If tool is a 4x4 Matrix, it updates the linked pose of the robot tool.</span>
            <span class="comment">% In  1 : item/pose -&gt; tool item or 4x4 Matrix (pose of the tool frame)</span>
            this.link.check_connection();
            <span class="keyword">if</span> numel(tool) == 1
                command = <span class="string">'S_Tool_ptr'</span>;
                this.link.send_line(command);
                this.link.send_item(tool);
            <span class="keyword">else</span>
                command = <span class="string">'S_Tool'</span>;
                this.link.send_line(command);
                this.link.send_pose(tool);
            <span class="keyword">end</span>
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> pose = SolveFK(this, joints)
            <span class="comment">% Computes the forward kinematics for the specified robot and joints.</span>
            <span class="comment">% In  1 : double x n -&gt; joints</span>
            <span class="comment">% Out 1 : 4x4 matrix -&gt; pose of the robot tool with respect to the robot frame</span>
            this.link.check_connection();
            command = <span class="string">'G_FK'</span>;
            this.link.send_line(command);
            this.link.send_array(joints);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> joints = SolveIK(this, pose)
            <span class="comment">% Computes the inverse kinematics for the specified robot and pose. The joints returned are the closest to the current robot configuration (see Solve_IK_All()).</span>
            <span class="comment">% In  1 : 4x4 matrix -&gt; pose of the robot tool with respect to the robot frame</span>
            <span class="comment">% Out 1 : double x n -&gt; joints</span>
            this.link.check_connection();
            command = <span class="string">'G_IK'</span>;
            this.link.send_line(command);
            this.link.send_pose(pose);
            this.link.send_item(this);
            joints = this.link.rec_array();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> joints_list = SolveIK_All(this, pose)
            <span class="comment">% Computes the inverse kinematics for the specified robot and pose. The function returns all available joint solutions as a 2D matrix.</span>
            <span class="comment">% In  1 : 4x4 matrix -&gt; pose of the robot tool with respect to the robot frame</span>
            <span class="comment">% Out 1 : double x n x m -&gt; joint list (2D matrix)</span>
            this.link.check_connection();
            command = <span class="string">'G_IK_cmpl'</span>;
            this.link.send_line(command);
            this.link.send_pose(pose);
            this.link.send_item(this);
            joints_list = this.link.rec_matrix();
            <span class="keyword">if</span> size(joints_list,1) &gt; 6
                joints_list = joints_list(1:end-2,:);
            <span class="keyword">end</span>
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
        <span class="keyword">function</span> MoveJ(this, target, blocking)
            <span class="comment">% Moves a robot to a specific target ("Move Joint" mode). This function blocks until the robot finishes its movements.</span>
            <span class="comment">% In  1 : joints/pose/item -&gt; target to move to. It can be the robot joints (Nx1 or 1xN), the pose (4x4) or an item (item pointer)</span>
            <span class="comment">% In  2 (optional): blocking -&gt; True if we want the instruction to wait until the robot finished the movement (default=True)</span>
            <span class="keyword">if</span> nargin &lt; 3
                blocking = 1;
            <span class="keyword">end</span>
            this.link.moveX(target,this,1,blocking);
        <span class="keyword">end</span>
        <span class="keyword">function</span> MoveL(this, target, blocking)
            <span class="comment">% Moves a robot to a specific target ("Move Linear" mode). This function waits (blocks) until the robot finishes its movements.</span>
            <span class="comment">% In  1 : joints/pose/item -&gt; target to move to. It can be the robot joints (Nx1 or 1xN), the pose (4x4) or an item (item pointer)</span>
            <span class="comment">% In  2 (optional): blocking -&gt; True if we want the instruction to wait until the robot finished the movement (default=True)</span>
            <span class="keyword">if</span> nargin &lt; 3
                blocking = 1;
            <span class="keyword">end</span>
            this.link.moveX(target,this,2,blocking);
        <span class="keyword">end</span>
        <span class="keyword">function</span> collision = MoveJ_Collision(this, j1, j2, minstep_deg)
            <span class="comment">% Checks if a joint movement is free of collision.</span>
            <span class="comment">% In  1 : joints -&gt; start joints</span>
            <span class="comment">% In  2 : joints -&gt; destination joints</span>
            <span class="comment">% In  3 (optional): maximum joint step in degrees</span>
            <span class="comment">% Out : collision : returns 0 if the movement is free of collision. Otherwise it returns the number of pairs of objects that collided if there was a collision.</span>
            <span class="keyword">if</span> nargin &lt; 4
                minstep_deg = -1;
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'CollisionMove'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array(j1);
            this.link.send_array(j2);
            this.link.send_int(minstep_deg*1000);
            collision = this.link.rec_int();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setSpeed(this, speed, accel)
            <span class="comment">% Sets the speed and/or the acceleration of a robot.</span>
            <span class="comment">% In  1 : speed -&gt; speed in mm/s (-1 = no change)</span>
            <span class="comment">% In  2 : accel (optional) -&gt; acceleration in mm/s2 (-1 = no change)</span>
            <span class="keyword">if</span> nargin &lt; 2
                accel = -1;
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'S_Speed'</span>;
            this.link.send_line(command);
            this.link.send_int(speed*1000);
            this.link.send_int(accel*1000);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> setZoneData(this, zonedata)
            <span class="comment">% Sets the robot zone data value.</span>
            <span class="comment">% In  1 : zonedata value (robot dependent, set to -1 for fine movements)</span>
            this.link.check_connection();
            command = <span class="string">'S_ZoneData'</span>;
            this.link.send_line(command);
            this.link.send_int(zonedata*1000);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> ShowSequence(this, sequence)
            <span class="comment">% Sends a joint sequence or an instruction sequence (like in RoKiSim).</span>
            <span class="comment">% In  1 : sequence</span>
            this.link.check_connection();
            command = <span class="string">'Show_Seq'</span>;
            this.link.send_line(command);
            this.link.send_matrix(sequence);
            this.link.send_item(this);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> busy = Busy(this)
            <span class="comment">% Checks if a robot is currently moving.</span>
            <span class="comment">% In  1 : item -&gt; robot to check</span>
            <span class="comment">% Out 1 : int -&gt; busy status (1=moving, 0=stopped)</span>
            this.link.check_connection();
            command = <span class="string">'IsBusy'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            busy = this.link.rec_int();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> WaitMove(this, timeout)
            <span class="comment">% Waits (blocks) until the robot finished its move.</span>
            <span class="comment">% In  1 (optional): timeout -&gt; Max time to wait for robot to finish its movement (in seconds)</span>
            <span class="keyword">if</span> nargin &lt; 2
                timeout = 300;
            <span class="keyword">end</span>
            this.link.check_connection();
            command = <span class="string">'WaitMove'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
            set(this.link.COM,<span class="string">'Timeout'</span>, timeout);
            this.link.check_status();
            set(this.link.COM,<span class="string">'Timeout'</span>, this.link.COM.TIMEOUT);
<span class="comment">%             busy = Is_Busy(this, itemrobot);</span>
<span class="comment">%             while busy</span>
<span class="comment">%                 busy = Is_Busy(this, itemrobot);</span>
<span class="comment">%             end</span>
        <span class="keyword">end</span>
        <span class="keyword">function</span> prog_status = RunProgram(this)
            <span class="comment">% Runs a program. It returns the number of instructions that can be executed successfully (a quick check is performed before the program starts)</span>
            <span class="comment">% This is a non-blocking call.</span>
            <span class="comment">% Out 1 : int -&gt; number of instructions that can be executed</span>
            this.link.check_connection();
            command = <span class="string">'RunProg'</span>;
            this.link.send_line(command);
            this.link.send_item(this);
            prog_status = this.link.rec_int();
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> addMoveJ(this, itemtarget)
            <span class="comment">% Adds a new "Move Joint" instruction to a program.</span>
            <span class="comment">% In  1 : item -&gt; target to move to</span>
            this.link.check_connection();
            command = <span class="string">'Add_INSMOVE'</span>;
            this.link.send_line(command);
            this.link.send_item(itemtarget);
            this.link.send_item(this);
            this.link.send_int(1);
            this.link.check_status();
        <span class="keyword">end</span>
        <span class="keyword">function</span> addMoveL(this, itemtarget)
            <span class="comment">% Adds a new "Move Linear" instruction to a program.</span>
            <span class="comment">% In  1 : item -&gt; target to move to</span>
            this.link.check_connection();
            command = <span class="string">'Add_INSMOVE'</span>;
            this.link.send_line(command);
            this.link.send_item(itemtarget);
            this.link.send_item(this);
            this.link.send_int(2);
            this.link.check_status();
        <span class="keyword">end</span>

    <span class="keyword">end</span>


<span class="keyword">end</span>
</pre><pre class="codeoutput error">Error using RobolinkItem (line 25)
Not enough input arguments.
</pre><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2015a</a><br></p></div><!--
##### SOURCE BEGIN #####
classdef RobolinkItem < handle
% The Item class represents an item in RoboDK station.
% An item can be a robot, a frame, a tool, an object, a target, ... (any item visible in the station tree)
% An item can also be seen as a node where other items can be attached to (child items).
% Items (RobolinkItem) are created by certain functions calls from Robolink class.
% Every item has one parent item/node and can have one or more child items/nodes.
% 
% RoboDK api Help:
% ->Type "doc Robolink"            for more help on the Robolink class
% ->Type "doc RobolinkItem"        for more help on the RobolinkItem item class
% ->Type "showdemo Example_RoboDK" for examples on how to use RoboDK's API using the last two classes

    properties
        item = 0; % This value should not be modified. It stores the object pointer
        link = 0; % This value should not be modified. It stores the connection pointer
    end
    methods
        function this = RobolinkItem(rl, ptr_item)
            % Creates an item object from the Robolink() connection and an
            % item number
            if nargin < 2
                ptr_item = 0;
            end
            this.item = ptr_item;
            this.link = rl;
        end
        function type = Type(this)
            % Returns an integer that represents the type of the item (robot, object, tool, frame, ...)
            this.link.check_connection();
            command = 'G_Item_Type';
            this.link.send_line(command);
            this.link.send_item(this);
            type = this.link.rec_int(); 
            this.link.check_status();
        end
        function Copy(this)
            % Copy the item to the clipboard (same as Ctrl+C). Use together with Paste() to duplicate items.
            this.link.Copy(this);
        end
        function newitem = Paste(this)
            % Paste the item from the clipboard as a child of this item (same as Ctrl+V)
            % Out 1: item -> new item pasted (created)
            newitem = this.link.Paste(this.item);
        end
        function AddGeometry(this, fromitem, pose)
            % Makes a copy of the geometry fromitem adding it at a given position (pose) relative to this item.
            this.link.check_connection();
            command = 'CopyFaces';
            this.link.send_line(command);
            this.link.send_item(fromitem);
            this.link.send_item(this);
            this.link.send_pose(pose);            
            this.link.check_status();
        end
        function Delete(this)
            % Deletes an item in the station.
            this.link.check_connection();
            command = 'Remove';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        end
        function valid = Valid(this)
            valid = (this.item ~= 0);
        end
        function setParent(this, parent)
            % Moves the item to another location (parent)
            % In 1  : parent -> parent to attach the item
            this.link.check_connection();
            command = 'S_Parent';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);            
            this.link.check_status();
        end
        function setParentStatic(this, parent)
            % Moves the item to another location (parent) without changing the current position in the station
            % In 1  : parent -> parent to attach the item
            this.link.check_connection();
            command = 'S_Parent_Static';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);            
            this.link.check_status();
        end
        function item_attached = AttachClosest(this)
            % Attaches the closest object to the provided tool.
            % Out  : item -> returns the item that was attached (0 if none found)
            this.link.check_connection();
            command = 'Attach_Closest';
            this.link.send_line(command);
            this.link.send_item(this);
            item_attached = this.link.rec_item();
            this.link.check_status();
        end
        function DetachClosest(this, parent)
            % Detaches the closest object attached to the tool (see also: Set_Parent_Static).
            % In  1 : item (optional) -> parent to leave the objects
            if nargin < 2
                parent = 0;
            end
            this.link.check_connection();
            command = 'Detach_Closest';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);            
            this.link.check_status();
        end    
        function DetachAll(this, parent)
            % Detaches any object attached to a tool (see also: Set_Parent_Static).
            % In  1 : item (optional) -> parent to leave the objects
            if nargin < 2
                parent = RobolinkItem(this.link);
            end
            this.link.check_connection();
            command = 'Detach_All';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_item(parent);            
            this.link.check_status();
        end        
        function parent = Parent(this)
            % Returns the parent item of the provided item.
            % Out : parent -> parent of the item
            this.link.check_connection();
            command = 'G_Parent';
            this.link.send_line(command);
            this.link.send_item(this);
            parent = this.link.rec_item();
            this.link.check_status();
        end
        function itemlist = Childs(this)
            % Returns a list of the item childs that are attached to the provided item.
            % Out  : child x n -> list of child item pointers
            this.link.check_connection();
            command = 'G_Childs';
            this.link.send_line(command);
            this.link.send_item(this);
            nitems = this.link.rec_int();
            itemlist = cell(nitems,1);
            for i=1:nitems
                itemlist{i} = this.link.rec_item();
            end
            this.link.check_status();
        end
        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        function visible = Visible(this)
            % Returns 1 if the item is visible, otherwise, returns 0.
            % Out : int -> visible (1) or not visible (0)
            this.link.check_connection();
            command = 'G_Visible';
            this.link.send_line(command);
            this.link.send_item(this);
            visible = this.link.rec_int();
            this.link.check_status();
        end
        function setVisible(this, visible, visible_frame)
            % Sets the item visiblity
            % In 2 : int -> set visible (1) or not visible (0)
            % In 3 : int (optional) -> set visible frame (True or 1) or not visible (False or 0)
            if nargin < 3
                visible_frame = visible;
            end
            this.link.check_connection();
            command = 'S_Visible';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_int(visible);
            this.link.send_int(visible_frame);            
            this.link.check_status();
        end
        function name = Name(this)
            % Gets the name of an item.
            % Out : name (string)
            this.link.check_connection();
            command = 'G_Name';
            this.link.send_line(command);
            this.link.send_item(this);
            name = this.link.rec_line();
            this.link.check_status();
        end
        function setName(this, name)
            % Sets the name of an item.
            % In 1 : name (string)
            this.link.check_connection();
            command = 'S_Name';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_line(name);
            this.link.check_status();
        end
        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        function setPose(this, pose)
            % Sets the local position (pose) of an item. For example, the position of an object/frame/target with respect to its parent.
            % In 1 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'S_Hlocal';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        end
        function pose = Pose(this)
            % Gets the local position (pose) of an item. For example, the position of an object/frame/target with respect to its parent.
            % Out 1 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'G_Hlocal';
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        end
        function setHtool(this, pose)
            % Sets the tool pose of an item.
            % In 2 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'S_Htool';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        end
        function pose = Htool(this)
            % Gets the tool pose of an item.
            % Out 1 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'G_Htool';
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        end
        function setPoseAbs(this, pose)
            % Sts the global position (pose) of an item. For example, the position of an object/frame/target with respect to the station origin.
            % In  1 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'S_Hlocal_Abs';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_pose(pose);
            this.link.check_status();
        end
        function pose = PoseAbs(this)
            % Gets the global position (pose) of an item. For example, the position of an object/frame/target with respect to the station origin.
            % Out 1 : 4x4 homogeneous matrix (pose)
            this.link.check_connection();
            command = 'G_Hlocal_Abs';
            this.link.send_line(command);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        end
        function color = check_color(~, color)
            % Makes formats color in a vector of size 4x1 and ranges [0,1]
            cs = numel(color);
            color = reshape(color, 1, cs);
            if cs > 4
                color = color(1:4);
            elseif cs < 4
                color = [color(1:end), zeros(1,4-cs)];
                color(4) = 1;
            end
            maxc = max(color);
            if maxc > 1
                color = color/maxc;
            end
        end
        function Recolor(this, tocolor, fromcolor, tolerance)
            % Changes the color of a robot/object/tool. A color must must in the format COLOR=[R,G,B,(A=1)] where all values range from 0 to 1.
            % Alpha (A) defaults to 1 (100% opaque). Set A to 0 to make an object transparent.
            % In  1 : color -> color to change to
            % In  2 (optional) : color -> filter by this color
            % In  3 (optional) : int -> optional tolerance to use if a color filter is used (defaults to 0.1)            
            this.link.check_connection();
            if nargin < 3
                fromcolor = [0,0,0,0];
                tolerance = 2;
            elseif nargin < 4
                tolerance = 0.1;
            end
            tocolor = check_color(this,tocolor);     
            fromcolor = check_color(this,fromcolor);       
            command = 'Recolor';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array([tolerance(1), fromcolor, tocolor]);
            this.link.check_status();
        end
        function Scale(this, scale)
            % Apply a scale to an object to make it bigger or smaller.
            % the scale can be uniform (one single value) or per axis (if scale is a vector [scale_x, scale_y, scale_z]).
            % In  1 : scale -> scale to apply
            this.link.check_connection();
            if numel(scale) < 3
                scale = [scale(1); scale(1); scale(1)];
            end
            command = 'Scale';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array(scale);
            this.link.check_status();
        end
        function setAsCartesianTarget(this)
            % Sets a target as a cartesian target. A cartesian target moves to cartesian coordinates.
            this.link.check_connection();
            command = 'S_Target_As_RT';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        end
        function setAsJointTarget(this)
            % Sets a target as a joint target. A joint target moves to a joints position.
            this.link.check_connection();
            command = 'S_Target_As_JT';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
        end

        function joints = Joints(this)
            % Returns the current joints of a robot or a target. In case of a cartesian target, it returns the preferred joints (configuration) to go to that cartesian position.
            % Out 1 : double x n -> joints
            this.link.check_connection();
            command = 'G_Thetas';
            this.link.send_line(command);
            this.link.send_item(this);
            joints = this.link.rec_array();
            this.link.check_status();
        end
        function setJoints(this, joints)
            % Sets the current joints of a robot or a target. In case of a cartesian target, it returns the preferred joints (configuration) to go to that cartesian position.
            % In  1 : double x n -> joints
            this.link.check_connection();
            command = 'S_Thetas';
            this.link.send_line(command);
            this.link.send_array(joints);
            this.link.send_item(this);
            this.link.check_status();
        end
        function setFrame(this, frame)
            % Sets the frame of a robot. The frame can be either an item pointer or a 4x4 Matrix.
            % If "frame" is an item pointer, it links the robot to the frame item. If frame is a 4x4 Matrix, it updates the linked pose of the robot frame.
            % In  1 : item/pose -> frame item or 4x4 Matrix (pose of the reference frame)
            this.link.check_connection();
            if numel(frame) == 1
                command = 'S_Frame_ptr';
                this.link.send_line(command);            
                this.link.send_item(frame);
            else
                command = 'S_Frame';
                this.link.send_line(command);
                this.link.send_pose(frame);
            end
            this.link.send_item(this);
            this.link.check_status();
        end
        function setTool(this, tool)
            % Sets the tool pose of a robot. The tool pose can be either an item pointer or a 4x4 Matrix.
            % If "tool" is an item pointer, it links the robot to the tool item. If tool is a 4x4 Matrix, it updates the linked pose of the robot tool.
            % In  1 : item/pose -> tool item or 4x4 Matrix (pose of the tool frame)
            this.link.check_connection();
            if numel(tool) == 1
                command = 'S_Tool_ptr';
                this.link.send_line(command);
                this.link.send_item(tool);
            else
                command = 'S_Tool';
                this.link.send_line(command);
                this.link.send_pose(tool);
            end            
            this.link.send_item(this);
            this.link.check_status();
        end
        function pose = SolveFK(this, joints)
            % Computes the forward kinematics for the specified robot and joints.
            % In  1 : double x n -> joints
            % Out 1 : 4x4 matrix -> pose of the robot tool with respect to the robot frame
            this.link.check_connection();
            command = 'G_FK';
            this.link.send_line(command);
            this.link.send_array(joints);
            this.link.send_item(this);
            pose = this.link.rec_pose();
            this.link.check_status();
        end
        function joints = SolveIK(this, pose)
            % Computes the inverse kinematics for the specified robot and pose. The joints returned are the closest to the current robot configuration (see Solve_IK_All()).
            % In  1 : 4x4 matrix -> pose of the robot tool with respect to the robot frame
            % Out 1 : double x n -> joints
            this.link.check_connection();
            command = 'G_IK';
            this.link.send_line(command);
            this.link.send_pose(pose);
            this.link.send_item(this);
            joints = this.link.rec_array();
            this.link.check_status();
        end
        function joints_list = SolveIK_All(this, pose)
            % Computes the inverse kinematics for the specified robot and pose. The function returns all available joint solutions as a 2D matrix.
            % In  1 : 4x4 matrix -> pose of the robot tool with respect to the robot frame
            % Out 1 : double x n x m -> joint list (2D matrix)
            this.link.check_connection();
            command = 'G_IK_cmpl';
            this.link.send_line(command);
            this.link.send_pose(pose);
            this.link.send_item(this);
            joints_list = this.link.rec_matrix();
            if size(joints_list,1) > 6
                joints_list = joints_list(1:end-2,:);
            end
            this.link.check_status();
        end
        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        function MoveJ(this, target, blocking)
            % Moves a robot to a specific target ("Move Joint" mode). This function blocks until the robot finishes its movements.
            % In  1 : joints/pose/item -> target to move to. It can be the robot joints (Nx1 or 1xN), the pose (4x4) or an item (item pointer)
            % In  2 (optional): blocking -> True if we want the instruction to wait until the robot finished the movement (default=True)
            if nargin < 3
                blocking = 1;
            end   
            this.link.moveX(target,this,1,blocking);
        end
        function MoveL(this, target, blocking)
            % Moves a robot to a specific target ("Move Linear" mode). This function waits (blocks) until the robot finishes its movements.
            % In  1 : joints/pose/item -> target to move to. It can be the robot joints (Nx1 or 1xN), the pose (4x4) or an item (item pointer)
            % In  2 (optional): blocking -> True if we want the instruction to wait until the robot finished the movement (default=True)
            if nargin < 3
                blocking = 1;
            end  
            this.link.moveX(target,this,2,blocking);
        end
        function collision = MoveJ_Collision(this, j1, j2, minstep_deg)
            % Checks if a joint movement is free of collision.
            % In  1 : joints -> start joints
            % In  2 : joints -> destination joints
            % In  3 (optional): maximum joint step in degrees
            % Out : collision : returns 0 if the movement is free of collision. Otherwise it returns the number of pairs of objects that collided if there was a collision.
            if nargin < 4
                minstep_deg = -1;
            end
            this.link.check_connection();
            command = 'CollisionMove';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.send_array(j1);
            this.link.send_array(j2);            
            this.link.send_int(minstep_deg*1000);
            collision = this.link.rec_int();
            this.link.check_status();   
        end        
        function setSpeed(this, speed, accel)
            % Sets the speed and/or the acceleration of a robot.
            % In  1 : speed -> speed in mm/s (-1 = no change)
            % In  2 : accel (optional) -> acceleration in mm/s2 (-1 = no change)
            if nargin < 2
                accel = -1;
            end
            this.link.check_connection();
            command = 'S_Speed';
            this.link.send_line(command);
            this.link.send_int(speed*1000);
            this.link.send_int(accel*1000);
            this.link.send_item(this);
            this.link.check_status();            
        end
        function setZoneData(this, zonedata)
            % Sets the robot zone data value.
            % In  1 : zonedata value (robot dependent, set to -1 for fine movements)
            this.link.check_connection();
            command = 'S_ZoneData';
            this.link.send_line(command);
            this.link.send_int(zonedata*1000);         
            this.link.send_item(this);
            this.link.check_status();
        end
        function ShowSequence(this, sequence)
            % Sends a joint sequence or an instruction sequence (like in RoKiSim).
            % In  1 : sequence
            this.link.check_connection();
            command = 'Show_Seq';
            this.link.send_line(command);
            this.link.send_matrix(sequence);         
            this.link.send_item(this);
            this.link.check_status();
        end
        function busy = Busy(this)
            % Checks if a robot is currently moving.
            % In  1 : item -> robot to check
            % Out 1 : int -> busy status (1=moving, 0=stopped)
            this.link.check_connection();
            command = 'IsBusy';
            this.link.send_line(command);
            this.link.send_item(this);
            busy = this.link.rec_int();
            this.link.check_status();
        end
        function WaitMove(this, timeout)
            % Waits (blocks) until the robot finished its move.
            % In  1 (optional): timeout -> Max time to wait for robot to finish its movement (in seconds)
            if nargin < 2
                timeout = 300;
            end
            this.link.check_connection();
            command = 'WaitMove';
            this.link.send_line(command);
            this.link.send_item(this);
            this.link.check_status();
            set(this.link.COM,'Timeout', timeout);
            this.link.check_status();
            set(this.link.COM,'Timeout', this.link.COM.TIMEOUT);
%             busy = Is_Busy(this, itemrobot);
%             while busy
%                 busy = Is_Busy(this, itemrobot);
%             end
        end
        function prog_status = RunProgram(this)
            % Runs a program. It returns the number of instructions that can be executed successfully (a quick check is performed before the program starts)
            % This is a non-blocking call.
            % Out 1 : int -> number of instructions that can be executed        
            this.link.check_connection();
            command = 'RunProg';
            this.link.send_line(command);
            this.link.send_item(this);          
            prog_status = this.link.rec_int();
            this.link.check_status();
        end  
        function addMoveJ(this, itemtarget)
            % Adds a new "Move Joint" instruction to a program.
            % In  1 : item -> target to move to         
            this.link.check_connection();
            command = 'Add_INSMOVE';
            this.link.send_line(command);
            this.link.send_item(itemtarget);
            this.link.send_item(this);
            this.link.send_int(1);
            this.link.check_status();
        end
        function addMoveL(this, itemtarget)
            % Adds a new "Move Linear" instruction to a program.
            % In  1 : item -> target to move to          
            this.link.check_connection();
            command = 'Add_INSMOVE';
            this.link.send_line(command);
            this.link.send_item(itemtarget);
            this.link.send_item(this);
            this.link.send_int(2);
            this.link.check_status();
        end    
        
    end

    
end
##### SOURCE END #####
--></body></html>